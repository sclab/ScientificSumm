Buying or selling a financial security in effect is a wager
on the security"s value. For example, buying a stock is a bet
that the stock"s value is greater than its current price. Each
trader evaluates his expected profit to decide the quantity
to buy or sell according to his own information and 
subjective probability assessment. The collective interaction of
all bets leads to an equilibrium that reflects an aggregation
of all the traders" information and beliefs. In practice, this
aggregate market assessment of the security"s value is often
more accurate than other forecasts relying on experts, polls,
or statistical inference [16, 17, 5, 2, 15].
Consider buying a security at price fifty-two cents, that
pays $1 if and only if a Democrat wins the 2008 US 
Presidential election. The transaction is a commitment to accept
a fifty-two cent loss if a Democrat does not win in return
for a forty-eight cent profit if a Democrat does win. In this
case of an event-contingent security, the price-the market"s
value of the security-corresponds directly to the estimated
probability of the event.
Almost all existing financial and betting exchanges pair up
bilateral trading partners. For example, one trader willing
to accept an x dollar loss if a Democrat does not win in
return for a y dollar profit if a Democrat wins is matched
up with a second trader willing to accept the opposite.
However in many scenarios, even if no bilateral agreements
exist among traders, multilateral agreements may be 
possible. For example, if one trader bets that the Democratic
candidate will receive more votes than the Republican 
candidate, a second trader bets that the Republican candidate
will receive more votes than the Libertarian candidate, and a
third trader bets that the Libertarian candidate will receive
more votes than the Democratic candidate, then, 
depending on the odds they each offer, there may be a three-way
agreeable match even though no two-way matches exist.
We propose an exchange where traders have considerable
flexibility to naturally and succinctly express their wagers,
326
and examine the computational complexity of the 
auctioneer"s resulting matching problem of identifying bilateral and
multilateral agreements. In particular, we focus on a setting
where traders bet on the outcome of a competition among
n candidates. For example, suppose that there are n 
candidates in an election (or n horses in a race, etc.) and thus
n! possible orderings of candidates after the final vote tally.
Traders may like to bet on arbitrary properties of the final
ordering, for example candidate D will win, candidate D
will finish in either first place or last place, candidate D
will defeat candidate R, candidates D and R will both 
defeat candidate L, etc. The goal of the exchange is to search
among all the offers to find two or more that together form
an agreeable match. As we shall see, the matching 
problem can be set up as a linear or integer program, depending
on whether orders are divisible or indivisible, respectively.
Attempting to reduce the problem to a bilateral matching
problem by explicitly creating n! securities, one for each 
possible final ordering, is both cumbersome for the traders and
computationally infeasible even for modest sized n. 
Moreover, traders" attention would be spread among n! 
independent choices, making the likelihood of two traders converging
at the same time and place seem remote.
There is a tradeoff between the expressiveness of the 
bidding language and the computational complexity of the 
matching problem. We want to offer traders the most expressive
bidding language possible while maintaining computational
feasibility. We explore two bidding languages that seem 
natural from a trader perspective. Subset betting, described in
Section 3.2, allows traders to bet on which positions in the
ranking a candidate will fall, for example candidate D will
finish in position 1, 3-5, or 10. Symetrically, traders can
also bet on which candidates will fall in a particular 
position. In Section 4, we derive a polynomial-time algorithm
for matching (divisible) subset bets. The key to the result
is showing that the exponentially big linear program has a
corresponding separation problem that reduces to maximum
weighted bipartite matching and consequently we can solve
it in time polynomial in the number of orders.
Pair betting, described in Section 3.3, allows traders to
bet on the final ranking of any two candidates, for example
candidate D will defeat candidate R. In Section 5, we show
that optimal matching of (divisible or indivisible) pair bets
is NP-hard, via a reduction from the unweighted minimum
feedback arc set problem. We also provide a 
polynomiallyverifiable sufficient condition for the existence of a 
pairbetting match and show that a greedy algorithm offers poor
approximation for indivisible pair bets.
