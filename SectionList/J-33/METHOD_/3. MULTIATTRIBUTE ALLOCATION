DEFINITION 12 (TRADE SURPLUS). The surplus of trade t =
(x, q, b, s, π) is given by
σ(t) = ˆuB
b (x, q) − ˆuS
s (x, q).
Note that the trade surplus does not depend on the payment, which
is simply a transfer from buyer to seller.
DEFINITION 13 (TRADE UNIT SURPLUS). The unit surplus
of trade t = (x, q, b, s, π) is given by σ1
(t) = σ(t)/q.
Under linear pricing, we can equivalently write σ1
(t) = ˆuB
b (x) −
ˆuS
s (x).
DEFINITION 14 (SURPLUS OF A TRADE IN CONTEXT). The
surplus of trade t = (x, q, b, s, π) in the context of other trades T,
σ(t; T), is given by
ˆuB
b (x, q; T) − ˆuS
s (x, q; T).
DEFINITION 15 (GMAP). The Global Multiattribute 
Allocation Problem (GMAP) is to find the set of acceptable trades 
maximizing total surplus,
max
T ∈2T
X
t∈T
σ(t; T \ {t}) s.t. ∀i. Ti ∈ OC
i .
DEFINITION 16 (MMP). The Multiattribute Matching 
Problem (MMP) is to find a best trade for a given pair of traders,
MMP(b, s) = arg max
t∈OT
b
∩OT
s
σ(t).
If OT
b ∩ OT
s is empty, we say that MMP has no solution.
112
Proofs of all the following results are provided in an extended 
version of this paper available from the authors.
THEOREM 2. Suppose all agents" offers exhibit no aggregation
(Definition 4). Then the solution to GMAP consists of a set of
trades, each of which is a solution to MMP for its specified pair
of traders.
THEOREM 3. Suppose that each agent"s offer set satisfies one
of the following (not necessarily the same) sets of conditions.
1. No aggregation and configuration parity (Definitions 4 and 9).
2. Divisibility, linear pricing, and configuration parity 
(Definitions 1, 10, and 9), with combination offer set defined as the
minimal set consistent with configuration aggregation 
(Definition 6).2
Then the solution to GMAP consists of a set of trades, each of
which employs a configuration that solves MMP for its specified
pair of traders.
Let MMPd
(b, s) denote a modified version of MMP, where OT
b
and OT
s are extended to assume divisibility (i.e., the offer sets are
taken to be their closures under Definition 1). Then we can extend
Theorem 3 to allow aggregating agents to maintain AON or 
minquantity offers as follows.
THEOREM 4. Suppose offer sets as in Theorem 3, except that
agents i satisfying configuration aggregation need be divisible only
down to qi, rather than down to 0. Then the solution to GMAP
consists of a set of trades, each of which employs the same 
configuration as a solution to MMPd
for its specified pair of traders.
THEOREM 5. Suppose agents b and s exhibit configuration 
parity, divisibility, and linear pricing, and there exists configuration x
such that ˆub(x) − ˆus(x) > 0. Then t ∈ MMPd
(b, s) iff
xt = arg max
x
{ˆub(x) − ˆus(x)}
qt = min(¯qb, ¯qs).
(1)
The preceding results signify that under certain conditions, we
can divide the global optimization problem into two parts: first find
a bilateral trade that maximizes unit surplus for each pair of traders
(or total surplus in the non-aggregation case), and then use the 
results to find a globally optimal set of trades. In the following two
sections we investigate each of these subproblems.
