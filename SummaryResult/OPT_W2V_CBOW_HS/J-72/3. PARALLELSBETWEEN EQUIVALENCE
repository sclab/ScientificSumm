Note that a demand query with maximal Lindahl prices is almost identical to an equivalence query, since in both cases we communicate the manifest valuation to the agent.
The agent"s manifest valuations are in fact valid Lindahl prices, and we refer to them as maximal Lindahl prices.
We say that the Lindahl prices support the optimal allocation.
Considering now why demand and equivalence queries are direct analogs, first note that given the πi in some Lindahl equilibrium, setting pi(S) = max{0, ˜vi(S) − πi} (4) for all i ∈ N and S ⊆ M yields valid Lindahl prices.
Once we have found an allocation with supporting Lindahl prices, the elicitation problem is solved.
The objective function to the dual program is: min pi(S) πs + i∈N πi (3) with πi = max S⊆M (˜vi(S) − pi(S)) πs = max (S1,...,Sn)∈Γ i∈N pi(Si) The optimal values of πi and πs correspond to the maximal utility to agent i with respect to its manifest valuation and the maximal revenue to the seller.
, Sn) ∈ arg max (S1,...,Sn)∈Γ i∈N pi(Si) (2) Condition (1) states that each agent is allocated a bundle that maximizes its utility at the given prices.
Since revealing Lindahl prices is a necessary condition for establishing an optimal allocation, and since Lindahl prices contain the same  information as valuation functions (in the worst-case), allowing for dependence on size(v1, .
Inequality (6) holds because the agent in fact prefers S to S given the prices, according to its response to the demand query.
Nisan and Segal (Proposition 1, [12]) and Parkes (Theorem 1, [13]) show that supporting Lindahl prices must necessarily be revealed in the course of any  preference elicitation protocol which terminates with an optimal allocation.
We have the following inequalities: ˜v(S) − p(S) ≥ ˜v(S ) − p(S ) ⇒ ˜v(S ) − ˜v(S) ≤ p(S ) − p(S) (5) v(S ) − p(S ) > v(S) − p(S) ⇒ v(S ) − v(S) > p(S ) − p(S) (6) Inequality (5) holds because the prices support the proposed allocation with respect to the manifest valuation.
Slightly less obvious is the fact that equivalence and demand queries are also analogs.
Furthermore, Nisan and Segal (Lemma 1, [12]) state that in the worst-case agents" prices must coincide with their valuations (up to a constant), when the valuation class is rich enough to contain dual valuations (as will be the case with most interesting classes).
Suppose an agent replies with a preferred  bundle S when proposed a bundle S and supporting Lindahl prices p(S) (supporting with respect to the the agent"s  manifest valuation).
These prices leave every agent indifferent across all bundles with positive price, and satisfy condition (1).
They are nonlinear in the sense that each bundle is assigned a price, and this price is not necessarily the sum of prices over its underlying goods.
AND DEMAND QUERIES We have described the query learning and preference  elicitation settings in a manner that highlights their similarities.
Thus Lindahl prices are of the form pi(S), for all S ⊆ M, for all i ∈ N. Lindahl prices are presented to the agents in demand  queries.
They are non-anonymous in the sense that two agents may face different prices for the same bundle of goods.
Thus demand  queries can also implicitly communicate manifest valuations, since Lindahl prices will typically be an additive constant away from these by equality (4).
Value and membership queries are clear analogs.
When agents have normalized quasi-linear utility  functions, Bikhchandani and Ostroy [4] show that there always exist Lindahl prices such that (S1, .
Thus at least one of S and S is a counterexample to the agent"s manifest valuation.
, Sn) is an optimal  allocation if and only if Si ∈ arg max Si   vi(Si) − pi(Si) ¡ ∀i ∈ N (1) (S1, .
It is therefore sufficient to announce supporting Lindahl prices to verify an optimal allocation.
To see this, we need the concept of Lindahl prices.
Out of all possible  vectors of Lindahl prices, maximal Lindahl prices maximize the utility of the auctioneer, in fact giving her the entire  social welfare.
There is usually a range of possible Lindahl prices  supporting a given optimal allocation.
, vn) in elicitation problems is entirely natural.
The problem of finding an optimal allocation (with respect to the manifest valuations) can be formulated as a linear program whose solutions are guaranteed to be integral [4].
Condition (2) states that the allocation maximizes the auctioneer"s  revenue at the given prices.
If it were the case that ˜v(S) = v(S) and ˜v(S ) = v(S ), these inequalities would represent a contradiction.
In the following lemma we show how to obtain counterexamples to equivalence queries through demand queries.
Conversely, prices that maximize the È i∈N πi component of the objective (the sum of the agents" utilities) are minimal Lindahl prices.
We leave for future work the question of which Lindahl prices to choose to minimize preference elicitation.
, vn) in  elicitation problems.
Lindahl prices are nonlinear and non-anonymous prices over the bundles.
Then either ˜v(S) = v(S) or ˜v(S ) = v(S ).
The scenario in which these  conditions hold is called a Lindahl equilibrium, or often a  competitive equilibrium.
Any Lindahl prices will do for our results, but some may have better elicitation  properties than others.
Finally, we justify dependence on size(v1, .
The dual variables to this linear program are supporting Lindahl prices for the resulting allocation.
Lemma 1.
