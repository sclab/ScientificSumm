Allowing such equilibria with crossing bids we can find the minimum profit a trader or set of traders can make, by minimizing the value yt (or sum P t∈T yt) over all optimal  solutions that satisfy pi = 0 whenever i is connected to only a single trader.
To get an equilibrium without crossing bids, we need to do a more general modification than just assuming that pi = 0 for all sellers and buyers connected to only a single trader.
We claim that this set of bids and asks, together with the trade x, are an equilibrium.
To see why, note that all traders t adjacent to a seller or buyer i offer the same ask or bid, and so trading with any trader is equally good for agent i.
Thus there is an optimal solution in which pi = 0 for all agents i connected only to a single trader.
So after doing this for all sellers, and analogously changing yt and pj for all buyers, we get an optimal solution where all sellers and buyers i either have pi = 0 or have at least two adjacent tight edges.
Consider any agent i that is only connected to a single trader t. Because the agent is only connected to a single trader, the variables yt and pi are dual  variables corresponding to the same primal inequality xt ≤ 1, and they always appear together as yt + pi in all inequalities, and also in the objective function.
Trader t gets yt profit in equilibrium, if after this decrease in the value of the edge, the edge is still included in the optimal transshipment.
We will show that the profits at equilibrium are an optimal solution to the following linear program.
In the next section, we extend the results to traders that may be connected to any subset of sellers and buyers.
The value of the edge is the social value θji − θij if the trader makes no profit, and decreases to θji − θij − yt if the trader t insists on making yt profit.
Given that we are working with pair-traders in this section, we can represent the problem using a bipartite graph G whose node set is B ∪ S, and where each trader t, connecting seller i and buyer j, appears as an edge t = (i, j) in G. Note, however, that we allow multiple traders to connect the same pair of agents.
We will also add a set of additional constraints xt ≤ 1 for all traders t ∈ T; this can be added to the description, as it is implied by the other constraints.
Our goal is to understand how a trader"s profit is affected by its position in the network; we will use the characterization we  obtained to work out the range of profits a trader can make.
A trader t can make profit in an equilibrium if and only if t is essential for the social welfare, that is, if deleting agent t decreases social welfare.
For a seller i, let βt = θi + pi be the bid for all traders t adjacent to i.
There are three different complementary slackness conditions we need to consider, corresponding to the three sets of variables x, y and p. Any agent can only make profit if he transacts, so pi > 0 implies P t∈adj(i) xt = 1, and similarly, yt > 0 implies that xt = 1 also.
If a seller i sells to a trader t ∈ adj(i) with bid βt then his profit is pi = βt − θi.
Offering a bid βt > pi + θi would get the seller to sell to trader t. Similarly, θj − pj is the price that buyer j bought for (or θj if he didn"t buy), and for any ask αt < θj − pj, the buyer will buy from trader t. So unless θj − pj ≤ θi + pi the trader has a profitable deviation.
The optimality of the social value of the trade will follow from the claim that the solution of these two linear programs derived from an equilibrium satisfy the complementary slackness  conditions for this pair of linear programs, and hence both x and (p, y) are optimal solutions to the corresponding linear programs.
Traders t = (i, j) who do not trade cannot make profit due to the constraint pi + θi ≥ θj − pj 1 1 1 0 0 1 0 1 1 0 0 0 1 (a) No trader profit 1 1 1 0 x x x x 1 x x 0 x (b) Trader profit Figure 2: Left: an equilibrium with crossing bids where traders make no money.
We will relate profits in a subgame perfect Nash equilibrium to optimal solutions of a certain linear program, use this relation to show that all equilibria result in efficient allocation of the goods, and show that a pure equilibrium always exists.
The dual is then: min sum(p, y) = X i∈B∪S pi + X t∈T yt yt ≥ 0 ∀t ∈ T : pi ≥ 0 ∀i ∈ S ∪ B : yt ≥ (θji − pj) − (θij + pi) ∀t = (i, j) ∈ T It is not hard to extend the proofs of Theorems 2.2 - 2.4 to this case.
We deal only with complete information.
Note that a seller or buyer i connected to a single trader t cannot have profit at equilibrium, so possible equilibrium profits are in one-to-one correspondence with dual solutions for which pi = 0 whenever i is monopolized by one trader.
To formulate a way of avoiding such crossing pairs, we say an equilibrium is cross-free if αt ≥ βt for all traders t. We now show there is always a cross-free equilibrium.
For any efficient trade between buyers and  sellers there is a pure equilibrium of bid-ask values that supports this trade.
At equilibrium the profits must satisfy the above inequalities.
This guarantees that for each seller or buyer the best sell or buy offer is along the edge where trade occurs in the solution.
For any trader t or subset of traders T the maximum total profit they can make in any equilibrium can be  computed in polynomial time.
We would like to claim that all dual solutions correspond to  equilibrium prices, but unfortunately this is not exactly true.
Finally, consider a trader t with xt > 0 that trades between seller i and buyer j, and recall that we have seen above that the inequality yt ≥ (θj − pj) − (θi + pi) is satisfied with equality for those who trade.
Also, if i is not trading in the solution 147 x then by complementary slackness pi = 0, and hence not trading is also equally good for i.
Suppose this is the only tight edge adjacent to agent i; then we can decrease pi and increase yt till one of the following happens: either pi = 0 or the constraint of some other agent t ∈ adj(i) becomes tight.
Consider an efficient trade; let xt = 1 if t trades and 0 otherwise; and consider an optimal solution (p, y) to the dual linear program.
The  techniques we develop to handle this case will form a useful basis for reasoning about the case of traders that may be connected  arbitrarily to the sellers and buyers.
Finally, if a trader t trades with ask αt and bid βt then his profit is yt = αt − βt.
Each trader t = (i, j) must offer a bid βt and an ask αt.
The maximum profit he can make is exactly his value to society, that is, the increase his presence causes in the social welfare.
We must have i involved in a trade, and the edge t = (i, j) along which the trade occurs must be tight.
For any trader t or subset of traders T the minimum total profit they can make in any equilibrium can be  computed in polynomial time. 
Now we can set asks and bids to form a cross-free equilibrium.
Taking an optimal dual solution where pi = 0 for all agents that are monopolized, we can convert it to an equilibrium, and with a bit more care, we can also create an equilibrium with no crossing bid-ask pairs.
To  maximize the profit of a trader t (or a subset of traders T ) all we need to do is to find an optimal solution to the dual linear program  maximizing the value of yt (or the sum P t∈T yt).
Profits in an equilibrium satisfy the dual constraints, and profits and trade satisfy complementary slackness.
However, yt = 0 by complementary slackness, and hence pi + θi ≥ θj − pj, so i sells for a price at least as high as the price at which j buys, so trader t cannot create profitable trade.
We want to make sure that pi = 0 for all sellers and buyers that have degree at most 1 in E. Consider a seller i that has pi > 0.
Assume (p, y) is a dual solution where agents connected only to one trader have pi = 0.
Recall that we needed to add the constraints xt ≤ 1 for all traders.
Similarly, if a buyer j buys from a trader t ∈ adj(j) with ask αt, then his profit is pj = θj − αt.
Similarly, for each buyer j, let αt = θj − pj be the ask for all traders t adjacent to j.
2.1 Indistinguishable Goods The socially optimal trade for the case of indistinguishable goods is the solution of the transportation problem: sending goods along the edges representing the traders.
min sum(p, y) = X i∈B∪S pi + X t∈T yt yt ≥ 0 ∀t ∈ T : pi ≥ 0 ∀i ∈ S ∪ B : yt ≥ (θj − pj) − (θi + pi) ∀t = (i, j) ∈ T LEMMA 2.1.
Now we are ready to prove our first theorem: THEOREM 2.2.
We then characterize the minimum and maximum profits traders can make.
For any efficient trade between buyers and  sellers there is a pure cross-free equilibrium.
For each buyer and seller i, we will use adj(i) to denote the set of traders who can trade with i.
Let x be a flow of goods resulting in an equilibrium, and let variables p and y be the profits.
Before we can convert a dual solution to equilibrium prices, we may need to modify the solution slightly as follows.
Crossing bid-ask pairs are weakly dominated by the strategy of offering a low bid β = 0 and an extremely high ask to guarantee that neither is accepted.
Then we extend the results to the more general case of a matching market, as discussed in the previous section, where valuations depend on the identity of the seller and buyer.
Let the set E be the set of edges t = (i, j) that are tight, in the sense that we have the equality yt = (θj − pj) − (θi + pi).
max SV (x) = X t∈T :t=(i,j) xt(θji − θij) We can show that the dual of this linear program corresponds to trader profits.
For all traders t = (i, j) associated with an edge t ∈ E we set αt and βt as before: we set the bid βt = pi + θi and the ask αt = θj −pj.
All agents not involved in trade make 0 profit.
The  askbid values along the tight edges guarantee that traders who trade cannot increase their spread.
A  deviation for t would involve offering a lower ask to seller i and a higher bid to seller j than their current trade.
A disappointing feature of the equilibrium created by this proof is that some agents t may have to create ask-bid pairs where βt > αt, offering to buy for more than the price at which they are willing to sell.
The edges along which trade occurs correspond to a matching in this bipartite graph, and the optimal trade is described by the following linear program.
Recall that in the proof of Theorem 2.3, traders only made money off of sellers or buyers that they have a monopoly over.
max SV (x) = X t∈T :t=(i,j) xt(θj − θi) xt ≥ 0 ∀t ∈ T X t∈adj(i) xt ≤ 1 ∀i ∈ S X t∈adj(j) xt ≤ 1 ∀j ∈ B Next we consider an equilibrium.
For understanding the ideas behind the analysis of the general model, it is very useful to first consider a special case with a  re1 Kranton and Minehart, however, can also analyze a more  general setting in which buyers values are private and thus buyers and sellers play a game of incomplete information.
This maximum profit can be obtained by a non-crossing equilibrium.
For a trader t = (i, j) ∈ E we have that pi +θi > θj −pj and we set αt = βt to be any value in the range [θj − pj, pi + θi].
For other traders t = (i, j), the value pi +θi is the price that seller i sold for (or θi if seller i decided to keep the good).
Agents that make such crossing bid-ask pairs never actually perform a trade, so it does not result in negative profit for the agent, but such pairs are unnatural.
However, it turns out that equilibria may differ in how the value of the allocation is spread between the sellers, buyers and traders.
For a trader t who conducted trade, we get equality by definition.
The additional dual variable yt corresponds to an additional inequality xt ≤ 1.
Now we claim that the two linear programs are duals of each other.
When a trader t is trading with seller i and buyer j, then profitable deviations would involve increasing αt or decreasing βt.
2.3 Trader Profits We have seen that all equilibria are efficient.
In this case, each trader is connected to just one buyer and one seller.
One way to think about the profit of a trader t = (i, j) is as a subtraction from the value of the corresponding edge (i, j).
This change only increases the set of tight edges E, keeps the solution feasible, and does not change the objective function value.
Clearly all profits are nonnegative, as trading is optional for all agents.
But by our construction (and assumption about monopolized agents) all sellers and buyers have multiple identical ask/bid offers, or trade is occurring at valuation.
Such dual solutions will then correspond to equilibria with non-crossing prices.
(We omit the subscript denoting the seller and buyer here since we are dealing with pair-traders.)
As in the previous section, we can write a transshipment linear program for the socially optimal trade, with the only change being in the  objective function.
In any equilibrium the trade is efficient.
This shows that sellers and buyers don"t have an incentive to deviate.
The variables pi for agents B ∪ S correspond to the equations P t∈adj(i) xt ≤ 1.
If we allow crossing equilibria, then we can also find the  minimum possible profit.
First, we consider the simplest model where sellers have indistinguishable items, and each buyer is interested in getting one item.
We need to show that traders have no incentive to deviate either.
Finally, consider a trader t = (i, j) who doesn"t trade.
This shows that trade is socially optimal.
Given the bid and ask price, the agents react to these prices, as described earlier.
Consider an optimal solution to the dual linear program.
All equilibria for the case of pair-traders with distinguishable goods result in socially optimal trade.
This set E contain all the edges where trade occurs, and some more edges.
146 stricted form of traders that we refer to as pair-traders.
Total trader profit ranges between 1 and 2.
Right: an equilibrium without crossing bids for any value x ∈ [0, 1].
To see why the last set of inequalities holds, consider two cases separately.
Figure 2 depicts a simple example of this phenomenon.
Instead of focusing on prices, we will focus on profits.
Consider the linear program describing the socially optimal trade.
(Thus, it essentially serves as a trade route between the two.)
2.2 Distinguishable Goods We now consider the case of distinguishable goods.
Next we argue that equilibria always exist.
In either case such a deviation cannot be successful.
THEOREM 2.3.
Pure  noncrossing equilibria exist.
THEOREM 2.8.
THEOREM 2.5.
THEOREM 2.4.
THEOREM 2.7.
148 THEOREM 2.6.
