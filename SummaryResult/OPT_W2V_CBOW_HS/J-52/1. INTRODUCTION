Third, we show that in the absence of a priori information about transit costs on the packet forwarding path, it is possible to generalize existing mechanisms to overcome scenarios that involve both hidden-information and hidden-action.
In settings where the intermediate nodes are  independent agents (such as individual nodes in ad-hoc and  peer-topeer networks or autonomous systems on the Internet), this poses an incentive problem; the intermediate nodes may incur significant communication and computation costs in the forwarding of packets without deriving any direct benefit from doing so.
Second, we find that  introducing per-hop monitoring has no impact on the principal"s  expected utility in equilibrium.
First, we show that it is possible to design contracts to induce cooperation when intermediate nodes can choose to forward or drop packets, as well as when the nodes can choose to forward packets with different levels of quality of service.
Even if some form of monitoring mechanism allows them to pinpoint the location of the failure, they may still be unable to attribute the cause of failure to either the deliberate action of the intermediate node, or to some external factors beyond the control of the intermediate node, such as network congestion, channel interference, or data corruption.
However, the actions of the intermediate nodes are often hidden from the endpoints.
The endpoints can provide incentives, e.g., in the form of  payments, to encourage the intermediate nodes to forward their  packets.
For a principal who wishes to induce an equilibrium in which all intermediate nodes cooperate, its  expected total payment is the same with or without monitoring.
If the path and transit costs are known prior to  transmission, the principal achieves first best solution, and can implement the contracts either directly with each intermediate node or  recursively through the network (each node making a contract with the following node) without any loss in utility.
In these scenarios, the principal pays a premium compared to  scenarios with known transit costs. 
However, monitoring provides a dominant strategy equilibrium, which is a stronger solution concept than the Nash equilibrium achievable in the absence of monitoring.
The problem of hidden action is hardly unique to networks.
In many cases, the endpoints can only observe whether or not the packet has reached the destination, and cannot attribute failure to a specific node on the path.
Endpoints wishing to communicate over a multi-hop network rely on intermediate nodes to forward packets from the sender to the receiver.
Also known as moral hazard, this problem has long been of interest in the economics literature concerning information asymmetry,  incentive and contract theory, and agency theory.
Consequently, a rational (i.e., utility maximizing) intermediate node may choose to forward packets at a low priority or not forward the packets at all.
This rational behavior may lead to suboptimal system performance.
We follow this  literature by formalizing the problem as a principal-agent model, where multiple agents making sequential hidden actions [17, 27].
Our results are threefold.
