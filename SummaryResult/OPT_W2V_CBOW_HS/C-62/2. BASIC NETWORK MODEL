A little more formally, Cheating refers to any action that an ISP can take, contrary to some target strategy point that we are trying to impose, that enhances her immediate payoff, but compromises the quality of the data path.
Another possibility we can model, is that a node finds a way to save on its internal forwarding costs, at the expense of its own quality.
Because of this ordering, our model does not allow firms to route strategically to affect future innovation or contracting decisions.
The decision to invest focuses on how the firm"s new quality will improve the contracts it can enter into.
Contracting decisions are made on an intermediate time scale, thus appearing next in the dynamics.
For example, we will later ask whether a player will maintain higher quality than her contracts require, in the hope of keeping her customer base or attracting future customers.
But that means that the routing game must tend to route to nodes with high quality.
The rate of innovation depends on the profits that potential innovators expect in the future.
2.2 The Routing Game The routing game proceeds in continuous time, with all players discounting by a common factor, r. The outputs from previous stages, q and the set of contracts, are treated as exogenous parameters for this game.
The agents" choices in this stage determine the vector of qualities, q, common knowledge for the rest of the game.
This includes the time for other players to detect and react to the cheating.
This reward, in turn, is governed by the competitive environment in which the firm operates, including the process by which firms select prices, and agree upon contracts with each other.
Of course, when data passes through multiple nodes, their qualities combine in some way to yield a path quality.
Innovation may be thought of as the micro-level process by which the network evolves.
This corresponds to the quality a user would experience if i were the only ISP on the data path.
Rather, if she can find a way to save on costs, at the expense of the high quality we desire, she will be tempted to do so.
Alternately, a node employing quality of service could give high priority packets a lower class of service, thus saving on resources and perhaps allowing itself to sell more high priority service.
A source, S, wants to send data to destination, D. S and D are nodes on a directed, acyclic graph, with a finite set of intermediate nodes, { }NV ,...2,1= , representing ISPs.
Innovation Game Competition Game Routing Game Innovation stage Competition stage Routing stageQualities (q) Contracts (prices) Profits t = -2 t = -1 t ∈ [ 0 , ) Figure 2: Game Dynamics 186 Analogously to the prisoners" dilemma, we will call such a decision cheating.
Hence, our model places innovation at the earliest stage, attempting to capture a single investment decision.
Innovation describes any investment by an ISP that alters its quality vector so that at least one potential data path offers higher utility.
If the routing game always selects the lowest-cost routes, for example, innovation will not be supported.
Although real firms have multiple opportunities to innovate, each opportunity is followed by a substantial length of time in which qualities are fixed.
At first, it may seem unclear how a large-scale distributed process such as innovation can be influenced by mechanical details like networks monitors.
This means, for example, that in the competition stage, firms must act rationally, maximizing their expected profits in the routing stage.
When data flows along a complete path from S to D, the source and destination, generally regarded as a single player, enjoy utility given by a function of the path quality, →Qu : .
Each ISP on the path tries to maximize her own payment, net of costs, so she may not want to cooperate with our plan.
Payment flows are also created, based on the contracts in place.
Since access is provided on a best-effort basis, a transit agreement can simply be represented by its price.
Although we are sympathetic to their observation, such an addition would make our analysis intractable.
Rather, a cheater can always enjoy the payoff from cheating for some positive time, which we label 0t .
Of course, these decisions depend on how routes are established, and how contracts determine actual monetary exchanges.
As we argued loosely above, such paths must be sustainable in order to support innovation.
Any model of network innovation must therefore relate at least three distinct processes: innovation, competition, and routing.
Routing decisions are made very frequently, mainly to maximize immediate profit flows, so they appear in the last stage.
This excludes technologies that require adoption by all ISPs on the network to function.
Each node on the path will be tempted to route to a cheaper next hop, increasing her immediate profits, but lowering the path quality.
We select a game dynamics that makes the relation between these processes as explicit as possible.
Relating our game to the familiar repeated prisoners" dilemma, imagine that we are trying to impose a high quality, but costly path.
As we will see later, it is socially beneficial to decrease 0t , so such lock-in is detrimental to welfare. 
If either cheating in route or cheating internally is profitable, the specified path will not be an equilibrium.
For each time 0≥t , each node must select a next hop to route data to.
Our dynamics reflect the fact that ISPs make innovation decisions infrequently.
They cannot carry out threats they made in the innovation stage if it lowers their expected payoff.
The reward generated by an invention must exceed the total cost to develop it, or the inventor will not rationally invest.
It is not necessary for us to specify how such changes take place.
To support innovation, the competition game must somehow reward ISPs with high quality.
Our model is most realistic when contracting decisions are infrequent.
We will call this type of action cheating in route.
Each node on the path has to pay the next node to deliver its traffic.
Other contracting systems we will explore will require more detail.
Next, at time 1−=t , agents participate in the competition stage, in which contracts are agreed upon.
Because such technologies do not create a competitive advantage, rewarding them is difficult and may require intellectual property or some other market distortion.
If she makes an investment, her quality may change in some way.
For example, * can act as an addition in the case of latency, multiplication in the case of loss probability, or a  minimumargument function in the case of security.
If the cheater has a contract which includes a customer lock-in period, 0t also includes the time until customers are allowed to switch to a new ISP.
One type of cheating relates to the data path.
Each dimension represents a distinct network characteristic that end-users care about.
For example, a node might drop packets beyond the rate required for congestion control, in order to throttle back TCP flows and thus save on forwarding costs [3].
In this study, we will use innovation in a fairly general sense.
In this stage, each agent decides whether or not to make research investments.
If the next node offers high quality transit, we may expect that a lower quality node will offer a lower price.
An SPE guarantees that players are forward-looking.
We use a game in continuous time in order to study such properties.
We will call this cheating internally to distinguish it from cheating in route.
Data flows across the resultant path, causing utility flow to S and D, and a flow cost to the nodes on the path, as described above.
It also includes deploying a new protocol that supports quality of service.
Finally, beginning at 0=t , firms participate in the routing stage.
2.1 Game Dynamics Ultimately, we are most interested in policies that promote innovation on the network.
In opposition, Afergan and Wroclawski argue that contracts are formed in response to current traffic patterns, in a feedback loop [2].
All paths lead to D, and every node not connected to D has at least two choices for next hop.
To each node, i, we associate a vector in the quality space, Qqi ∈ .
We assume that cheating can never be caught instantaneously.
Our schematic already suggests that the routing game is crucial for promoting innovation.
Even more broadly, buying new equipment to decrease S D 185 latency may also be regarded as innovation.
The routing game includes only the routing stage.
Our analysis is limited in one crucial respect: We focus on inventions that a single ISP can implement to improve the end-user experience.
The * operation reflects the characteristics of each dimension of quality.
Repetition reveals interesting effects not visible in a single stage game, such as informal collusion to elevate prices in [12].
The innovation game includes all three stages.
If she chooses not to, her quality remains fixed.
We will support this observation with analysis later.
This includes researching a new routing algorithm that decreases the amount of jitter users experience.
The innovation stage occurs first, at time 2−=t .
Each node along the path, i, experiences some cost of transmission, ci.
The competition game includes only the competition stage and the routing stage.
Our model must draw this connection in a realistic fashion.
An SPE is a strategy point that is a Nash equilibrium when restricted to each subgame.
We will represent quality by a finite dimensional vector space, Q, called the quality space.
For example, latency, loss probability, jitter, and IP version can each be assigned to a dimension.
In today"s industry, these contracts include prices for transit access, and peering agreements.
Let N Q∈q be the vector of all node qualities.
Throughout this paper, our solution concept will be a subgame perfect equilibrium (SPE).
We represent this by an associative binary operation, *: QQQ →× .
Other research has already employed repeated games to study routing, for example [1], [12].
We defer this interesting topic to future work.
For path ( )nvvv ,...,, 21 , the quality is given by nvvv qqq ∗∗∗ ...21 .
Three important subgames have been labeled in Figure 2.
This is represented schematically in Figure 2.
