Recall vtij = θji −pj −(θij +pi), and the dual constraint of the trader"s optimization problem requires qti + qtj ≥ vtij.
If qti > 0 for some t, then trader t must trade with i, as his solution is optimal, and by complementary slackness for the dual solution, qti > 0 implies that t trades with i.
To see that z satisfies complementary  slackness we need to argue that for all other traders t = t we have both qt i = 0 and qt j = 0.
To see why it is true for the trader t that i is trading with 