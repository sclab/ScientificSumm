The third phase chooses an assignment for each domain in a top down fashion beginning with the agent at the root node.
Each other node then receives a value propagation message from its parent and chooses the assignment for its domain that has the best utility given the assignments received in the  message.
At this point all utilities involving node Y are known, and the domain for Y may be safely eliminated from the joined hypercube.
A value propagation message with this assignment is sent to each node in C(Z).
The complexity of DPOP depends on the size of 