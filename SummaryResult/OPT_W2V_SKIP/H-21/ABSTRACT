We propose a methodology for building a practical robust query classification system that can identify thousands of query classes with reasonable accuracy, while dealing in  realtime with the query volume of a commercial web search  engine.
We believe that the proposed methodology will lead to better matching of online ads to rare queries and overall to a better user experience.
Motivated by the needs of search  advertising, we primarily focus on rare queries, which are the hardest from the point of view of machine learning, yet in  aggregation account for a considerable fraction of search engine traffic.
We use a 