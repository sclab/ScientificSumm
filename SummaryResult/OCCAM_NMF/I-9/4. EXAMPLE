moreover, in order to specify that making payments and sending cricket bats can be in any order, we can add in front of payment method in rule 1 as follows: σ [10$@c ⊗ (paypal paid@m ⊕ credit paid@mm )c m 10 $@m ⊗ cricket b@c ⊗ cricket b@m⊥ m ].m c this addition in the condition of the rule means that the time of payment can be any time up to cus"s choice, as long as cus pays and hence, the time order between making payments and sending goods becomes flexible. 
rule 5 will then be utilized to allow cus to handle the exception by paying via paypal.
if an exception happens that cus"s credit is not approved, credit not appr@c is produced andb cus can backtrack to paying via paypal.
also, non-determinism that whether cus"s credit is disapproved or credit payment is made to mer is faithfully represented.
it is cus"s own decision to proceed with the preferred  payment method.
4.4 flexibility the desired flexibility has been achieved in the example.
the interaction ends as all commitments are resolved.
any values of n1 such that n1 − 1 ≥ 0 ⇔ n1 ≥ 1 will allow mer to fulfill cus"s initial request of [ cricket b@cc ]⊥ .
together with the other condition 10$@c being satisfied,c this allows the initial proposal to be applied by mer to derive n1 cricket b@cc and a commitment of n1 cricket b@m⊥ m for mer, which is also resolved by the resource cricket b@mm available at mer.
when any of n1 paypal paid@m (if cus pays via pay-m pal) or n1 credit paid@m (if cus pays by credit card)m is derived, n1 (credit paym@m ⊕ paypal paid@mm ) ism also derived, hence the payment method is arranged.
7. mer fulfills cus"s initial request.
at the next (n1-1) time point, n1−1 ( credit not appr@mb ⊕ credit paym@mb )  becomes n1−1 credit paym@m n1 credit paym@m .b b as a result, at the next n1 time points, ebank will arrange the credit payment.
for simplicity, we show only the case where cus"s credit is approved.
there are two cases, cus"s credit is approved or disapproved.
hence, ebank then applies the proposalm to derive: n1−1 ( credit not appr@m ⊕ credit paym@mb ).b ⊕ indicates the choice is external to both agents.
m to b: accept the rule condition is fulfilled by mer as quote@mm n1−1 quote@m .
6. b to m: propose n1−1 [quote@mm ( credit not appr@m ⊕ credit paym@mb )]b with similar analysis, mer accepts the proposal.
because credit paym@m will be available one time point after theb rule"s application time, ebank proposes to mer an instance of rule 4 at the next n1-1 time points.
m to e: request [ n1 credit paym@mb ]⊥ ebank searches and finds rule 4 applicable.
hence, mer will further make a request to ebank.
5. rule 2 at mer is applicable but mer can not derive its condition ( n1 credit paym@mb ).
4. deriving n1 credit paid@m : cus can not derivem this formula by itself, hence, it will make a request to mer: c to m: request [ n1 credit paid@mm ]⊥ .
we assume that cus prefers credit payment.
3. deriving n1 10$@c : as cus has 50 dollars, it canc make use of 10 dollars: 10 $@c 10$@c n1 10$@c .c c c there are two options for payment method, the choice is at agent cus.
n110$@cc ; n1paypal paid@m or n1credit paid@mm ; -(*)-m n110$@c ⊗ ( n1paypal paid@m ⊕ n1credit paid@mm )c m n1(10$@c ⊗ (paypal paid@m ⊕ credit paid@mm ))c m from (*), one way to satisfy the conditions is for cus to  derive, at the next n1 time points, 10 dollars ( n1 10$@cc ); and to choose paying via paypal ( n1 paypal paid@mm ) or by credit payment ( n1 credit paid@mm ).
hence, c to m: accept cus analyzes the conditions of the accepted proposal by proof search.
on autonomous agents and multi-agent systems (aamas 07) ditions can be satisfied, the proposals can help to derive its request.
m to c: propose n1 [10$@c ⊗ (paypal paid@m ⊕ credit paid@mm )c m 10 $@m ⊗ cricket b@c ⊗ cricket b@m⊥ m ]m c with similar analysis, cus determines that given the  conc 128 the sixth intl.
joint conf.
mer will propose rule 1c c at a time instance n1 to cus as a pre-commitment.
one applications of rule 1 can derive cricket b@c and cricket b@c cricket b@c .
4.3 interaction 1. cus can not fulfill its commitment of [ (cricket b@cc )]⊥ and hence, makes a request to merchant: c to m: request [ cricket b@cc ]⊥ 2. to meet the request, mer searches for applicable rules.
once payment is arranged, mer will apply its original  proposal to satisfy the cus"s request of a cricket bat and hence removing one cricket bat and adding 10 dollars into its set of resources.
if the second case happens, credit payment is failed, cus may back track to take the option paying via paypal.
if the first case  happens, credit payment is done.
mer accepts and fulfills the conditions.
ebank proposes that mer gives a quote of sale and depending on cus"s  credibility, at the next time point, either credit payment will be arranged or a disapproval of cus"s credit will be informed.
mer will then ask ebank to arrange a credit payment.
assuming that cus only pays via paypal if credit payment fails, cus will let mer charges by credit.
cus needs to prepare 10 dollars and payment can be made by credit or via paypal.
mer replies with a proposal in which each cricket bat costs 10 dollars.
rule 5: cus will pay mer via paypal if there is an  indication from ebank that cus"s credit is not approved: σ [credit not appr@c paypal paid@mm ]b 4.2 description of the interaction cus requests from mer a cricket bat at some time.
the decision is dependent on the credibility of cus and hence is external (⊕) to ebank and mer: σ [sale quote@m ( credit not appr@mb ) ⊕m credit paym@mb ] rules at agent cus cus has an amount of 50 dollars available at any time, can be used for credit payment or cash payment: $50@c. cus has a commitment of obtaining a cricket bat at some time: [ cricket b@cc ]⊥ .
σ [credit not appr@m credit not appr@cb ]b rules at agent ebank rule 4: upon receiving a sale quote from mer, at the next time point, ebank commits to either informing mer that cus"s credit is not approved ( credit not appr@mb ) or arranging a credit payment to mer ( credit paym@mb ).
σ [10$@c ⊗ (paypal paid@m ⊕ credit paid@mm )c m 10 $@m ⊗ cricket b@c ⊗ cricket b@m⊥ m c m ] rule 2: if ebank carries out the credit payment to mer then the requirement of credit payment at mer is fulfilled: σ [credit paym@m credit paid@mm ]b rule 3: if ebank informs mer of its disapproval of cus"s credit then mer will also let cus know.
the choice is at cus.
rules at agent mer mer has available at any time 200 cricket bats for sale and can issue sale quotes at any time: 200 cricket b@m ⊗ σ sale quote@m .m m rule 1: mer commits to offering a cricket bat (cricket b@m⊥ m ) to cus ( cricket b@cc ) if cus pays 10  dollars (10$@cc ) either via paypal or credit card.
for simplicity, we refer to them as rules.
4.1 specifying protocol we design a set of pre-commitments and capabilities to implement the above scenario.
we return to the online sales scenario introduced in  section 1.
