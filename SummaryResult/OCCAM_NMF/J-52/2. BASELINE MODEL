we consider internet routing as a case study in section 7. in section 8 we present related work, and section 9 concludes the paper. 
in section 6, we show that the model applies to scenarios in which agents choose between different levels of quality of service.
in section 5, we distinguish between recursive and direct contracts and discuss their relationship.
in section 4, we extend the model to scenarios with  unknown transit costs.
in section 3 we consider agents who decide whether to drop or forward  packets with and without monitoring when the transit costs are common knowledge.
the remainder of this paper is organized as follows.
with each node, and recursive contracts, where each node enters a contractual relationship with its downstream node.
figure 2: structure of the multihop routing game under known  topology and transit costs.
s dn1 source destination n intermediate nodes figure 1: multi-hop path from sender to destination.
we also distinguish between direct contracts, where the principal signs an individual contract 1we use the notion of ex ante individual rationality, in which the agents choose to participate before they know the state of the system.
we show that our model can be applied to both scenarios with known and  unknown topologies and costs, and highlight the implications of each scenario in the context of contracts.
in other routing  scenarios, the sender does not have this a priori information.
that is, the sender knows in advance the path that its packet will take and the costs on that path.
in some network scenarios, the topology and costs are common knowledge.
(ic) incentive compatibility: the expected utility from exerting high-effort should (weakly) exceed its expected utility from exerting low-effort.
the outcome is a function of the vector of actions taken by the agents on the path, a = (a1, ..., an) ∈ {0, 1}n , and the loss rate on the channels, k. the benefit of the sender from the outcome is denoted by w(x), where: w(xg ) = wg ; and w(xb ) = wb = 0 the utility of the sender is consequently: u(x, s) = w(x) − s where: s = pn i=1 si a sender who wishes to induce an equilibrium in which all nodes engage in the high-effort action needs to satisfy two constraints for each agent i: (ir) individual rationality (participation constraint)1 : the  expected utility from participation should (weakly) exceed its reservation utility (which we normalize to 0).
without loss of generality we normalize the c(ai = 0) to be zero, and denote the high-effort cost by c, so c(ai = 0) = 0 and c(ai = 1) = c. the utility of agent i, denoted by ui, is a function of the payment it receives from the principal (si), the action it takes (ai), and the cost it incurs (ci), as follows: ui(si, ci, ai) = si − aici the outcome is denoted by x ∈ {xg , xb }, where xg stands for the good outcome in which the packet reaches the  destination, and xb stands for the bad outcome in which the packet is dropped before it reaches the destination.
each action is associated with a cost (to the agent) c(ai), and we assume: c(ai = 1) > c(ai = 0) at this stage, we assume that all nodes have the same c(ai) for presentation clarity, but we relax this assumption later.
we denote the action choice of agent i by ai ∈ {0, 1}, where ai = 0 and ai = 1 stand for the low-effort and high-effort actions, respectively.
for simplicity, we assume that each agent has only two possible actions; one involving significant effort and one involving little  effort.
we assume that all participants are risk neutral and that standard assumptions about the global observability of the final outcome and the enforceability of payments by guaranteeing parties hold.
when necessary, agents can in turn make subsequent take-it-or-leave-it offers to their downstream agents.
if the contracts are accepted, the agents choose their  actions sequentially to maximize their expected payoffs based on the payment schedule of the contract.
the  principal (who in practice can be either the sender, the receiver, or 117 both) makes individual take-it-or-leave-it offers (contracts) to the agents.
we consider a principal-agent model, where the principal is a pair of communication endpoints who wish to communicate over a multi-hop network, and the agents are the intermediate nodes capable of forwarding packets between the endpoints.
