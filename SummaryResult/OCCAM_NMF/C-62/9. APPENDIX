hence, the stackelberg price-quality game yields an optimal route.
finally, we deduce that subgame 1, which is the entire game, maximizes local welfare, which is equivalent to actual welfare.
for the initial case, observe that this assumption holds for the source.
if ( )( )knlv ,, is maximal over ln, it is also maximal over the paths in ln+1 that don"t lead to n. this means that node n can choose some n small enough so that ( )nlv , is maximal over ln+1, so the route will lead to k. conversely, if ( )( )knlv ,, is not maximal over ln, either v is greater for another of n"s next hops, in which case n will select that one in order to increase n, or v is greater for some path in ln+1 that don"t lead to n, in which case ( )nlv , cannot be maximal for any  nonnegative n. thus, we conclude that subgame n maximizes local welfare.
this path is chosen whenever ( )nlv , is maximal over ln+1 and possible next hops.
if node n selects next hop k, we can write the following relation, ( ) ( )( ) ( )( ) nknn knlvpcpknlvnlv π−=++−= ,,,,, , (9) where n is node n"s profit if the path to n is chosen.
we show that subgame n does as well.
for induction, assume that subgame n + 1 maximizes local welfare.
for subgame n, define the local welfare over paths nll ∈ , and their possible next hops, nj < as follows, ( ) ( ) j li ipathjl pcqqujlv −−= ∈ *, , (8) where ql is the quality of path l in the set {n,…,n}, and pathjq and pj are the quality and price of the contract j has offered.
that is, ln is the set of possible routes from s to reach some node that has already moved.
let ln be the set of possible paths restricted to nodes n,…,n.
let subgame n be the game that begins with n choosing its contract.
proof of claim 4. label the nodes 1,2,.. n in the order in which they select contracts.
the rest of the claim simply recognizes that rp / is the greatest reward node i can receive for its investment, so it will not invest sums greater than this.
then lemma 1 gives, 1 13221 1... − − − −> − − ⋅⋅ − − − − ≥ n s l n lll p pp n pp pp pp pp pp pp t (7) this can be rearranged to give ( ) ( ) s n l p n t pp 1 1/1 − +≤ − , as required.
so node j"s temptation to cheat is at least 11 ++ − − ≥ −− −− jj l jjj ljj pp pp pcp pcp .
each node along the data path can cheat in route by giving data to the bargain path at price no more than lp .
we may assume the prices on the path are greater than lp or the claim follows trivially.
let the prices along the data path be ppppp ns == ,..., 21 , with marginal costs, ncc ,...,1 .
proof of claim 2. node i must fall on the equilibrium data path to receive any payment.
