Furthermore, Nisan and Segal (Lemma 1, [12]) state that in the worst-case agents" prices must coincide with their valuations (up to a constant), when the valuation class is rich enough to contain dual valuations (as will be the case with most interesting classes).
Inequality (6) holds because the agent in fact prefers S to S given the prices, according to its response to the demand query.
To see this, we need the concept of Lindahl prices.
Considering now why demand and equivalence queries are direct analogs , first note that given the Ï€i in some Lindahl equilibrium , setting 